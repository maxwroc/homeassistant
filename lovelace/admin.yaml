- type: vertical-stack
  cards:

    - type: horizontal-stack
      cards:
        - type: custom:mini-graph-card
          entities:
            - sensor.cpu_temperature
          points_per_hour: 4
        - type: custom:mini-graph-card
          entities:
            - sensor.processor_use
          line_color: lightgreen
          points_per_hour: 2
    - type: horizontal-stack
      cards:
        - type: custom:mini-graph-card
          entities:
            - sensor.memory_use_percent
          line_color: orange
          points_per_hour: 2
        - type: custom:mini-graph-card
          entities:
            - sensor.disk_use_percent
          line_color: yellow
          points_per_hour: 2


    - type: vertical-stack
      cards:
        - type: entities
          title: Config changes
          show_header_toggle: false
          entities:
            - sensor.config_last_backup
            - sensor.files_changed_locally
        - type: horizontal-stack
          cards:
          - type: entity-button
            entity: sensor.files_changed_locally
            name: Store credentials
            icon: mdi:file-upload-outline
            show_icon: false
            show_name: true
            tap_action:
              action: call-service
              service: shell_command.store_creds
          - type: entity-button
            entity: sensor.files_changed_locally
            name: Commit config changes
            icon: mdi:file-upload-outline
            show_icon: false
            show_name: true
            tap_action:
              action: call-service
              service: script.commit_configs

- type: vertical-stack
  cards:
    - type: entities
      title: Stats
      show_header_toggle: false
      entities:
        - sensor.energy_rpi_monthly
        - sensor.home_assistant_v2_db
        - sensor.hassio_online
        - sensor.last_boot
        - entity: sensor.files_on_raspwroc
          name: "RaspWroc - files"
          secondary_info: last-changed
          icon: mdi:file-multiple
        - entity: sensor.remaining_space_on_raspwroc
          name: "RaspWroc - remaining space"
          secondary_info: last-changed
          icon: mdi:harddisk

    - type: custom:mini-graph-card
      entities:
        - entity: sensor.energy_rpi_daily
          name: RPi4 energy usage
      name: RPi4 energy consumption
      hours_to_show: 336
      height: 150
      aggregate_func: max
      group_by: date
      hour24: true
      show:
        graph: bar

- type: entities
  title: Tools
  show_header_toggle: false
  entities:
    - type: weblink
      name: "IDE"
      url: http://192.168.2.104:8321/ide.html
      icon: mdi:file-document-edit-outline
    - type: weblink
      name: "Router"
      url: http://192.168.2.1
      icon: mdi:router-wireless
    - type: weblink
      name: "Grafana"
      url: http://192.168.2.104:3000/d/R1BSsRkgk/scarbrook?orgId=1
      icon: mdi:gauge
    - type: weblink
      name: "BTSync"
      url: http://192.168.2.103:45454
      icon: mdi:sync
    - type: weblink
      name: "BTSync - RaspWroc"
      url: http://raspwroc:45454
      icon: mdi:sync
    - type: weblink
      name: "Deluge"
      url: http://192.168.2.103:8112
      icon: mdi:cloud-download


- type: 'custom:battery-state-card'
  title: Battery levels
  sort_by_level: "asc"
  # secondary_info: last_changed
  tap_action:
    action: more-info
  color_gradient:
    - "#ff0000"
    - "#ffff00"
    - "#00ff00"
  bulk_rename:
    - from: "Battery Level"
      to: "sensor"
    - from: " battery"
    - from: "switch sensor"
      to: "switch"
    - from: "temperature"
      to: " temp. "
  collapse:
    - group_id: group.motion_sensors_batteries
      min: 99
    - group_id: group.switches_batteries
      min: 99
    - group_id: group.door_sensors_batteries
      min: 99
    - group_id: group.temp_sensors_batteries
      icon: 'mdi:thermometer'
      min: 99
  filter:
    include:
      - name: entity_id
        value: '*_battery_level'
        operator: matches
      - name: attributes.device_class
        value: battery
        operator: "="


- type: custom:github-flexi-card
  title: Github projects
  secondary_info: "{latest_release_tag}"
  url: true
  attribute_urls: true
  attributes:
    - name: views_unique
    - name: stargazers
    - name: open_issues
    - name: open_pull_requests
  entities:
    - sensor.battery_state_card
    - sensor.hideseek_mod
    - sensor.github_flexi_card
    - sensor.urleditorpro
    - entity: sensor.home_assistant_config
      secondary_info: null

#- type: iframe
#  #url: http://192.168.2.104:8085/sources/0/dashboards/1?lower=now%28%29%20-%2024h&present=true
#  url: http://192.168.2.104:8123/api/hassio_ingress/J469DFzDQ4mVGagrfD7Q3MLGSCpwcfVxqhhOO2PY4kI/sources/0/dashboards/1?lower=now%28%29%20-%2024h&present=true
#  aspect_ratio: 136%


