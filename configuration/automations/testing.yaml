


- alias: "Bathroom lights auto-turn-off"
  trigger:
    platform: state
    entity_id: binary_sensor.bathroom_motion_2
    from: "on"
    to: "off"
    for:
      hours: 0
      minutes: 20
      seconds: 0
  condition:
    condition: state
    entity_id: binary_sensor.bathroom_motion_2
    state: "off"
  action:
    - service: light.turn_off
      data:
        entity_id: light.bathroom_lights
    - service: notify.pushover
      data:
        message: "Turned off bathroom lights"
        title: "Electricity savings"

- alias: "Bathroom lights auto-turn-off (master)"
  trigger:
    platform: state
    entity_id: binary_sensor.master_bathroom_motion
    from: "on"
    to: "off"
    for:
      hours: 0
      minutes: 20
      seconds: 0
  condition:
    condition: state
    entity_id: binary_sensor.master_bathroom_motion
    state: "off"
  action:
    - service: light.turn_off
      data:
        entity_id: light.master_bathroom_lights
    - service: notify.pushover
      data:
        message: "Turned off master bathroom lights"
        title: "Electricity savings"

    # - service: media_player.select_source
    #   data:
    #     entity_id: media_player.spotify
    #     source: "Bedroom dot"
    # - service: media_player.play_media
    #   data:
    #     entity_id: media_player.spotify
    #     media_content_id: 'spotify:user:spotify:playlist:6UFW0S4ENOBkQQFhLzn0Dq'
    #     media_content_type: playlist


# Playing ring tone on speakers
    # - service: media_player.play_media
    #   data:
    #     entity_id: media_player.spotify
    #     media_content_type: "music"
    #     media_content_id: "spotify:track:6jjDlCd8d5qBWTFU6t11g2"



# - alias: 'Andrews Home notification'
#   initial_state: false
#   trigger:
#     platform: state
#     entity_id: person.andrew
#     from: 'not_home'
#     to: 'home'
#     for:
#       seconds: 90
#   condition:
#     - condition: template # only notify once every 10 minutes at most
#       value_template: "{{ ( as_timestamp(now()) - as_timestamp(state_attr('automation.andrews_home_notification', 'last_triggered')) |int(0) ) > 3600 }}"
#   action:
#     - service: notify.all
#       data:
#         title: "Home Assistant"
#         data:
#           type: announce
#         message: 'Welcome Home Andrew'
#     - service: script.audio_notify
#       data_template:
#         tts_msg: "Welcome Home Andrew"